<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title></title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />

    <script
      src="https://code.jquery.com/jquery-3.3.1.js"
      integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
      crossorigin="anonymous"
    ></script>
    <script>
      $(function () {
        $("#navbar").load("sideNavbar.html");
        $("#AnimatedSideBar").load("AnimatedSideBar.html");
      });
    </script>
  </head>

  <body>
    <div id="AnimatedSideBar"></div>
    <div style="margin-left: 100px; margin-top: 20%">
      <div
      
        class="container card m-auto pt-4"
        style="background-color: #f5f5f5; margin-top: 30%"
      >
        
        <form class="container" method="POST" id="Rest-Details">
          <div class="form-row">
            <div class="form-group col-9 offset-1">
              <label for="resName">Restaurant Name</label>
              <input
              id="resName"
                type="text"
                class="form-control"
                placeholder="Name"
                style="background-color: rgba(70, 205, 123, 0.15)"
              />
            </div>
            <div class="form-group col-9 offset-1">
              <label for="resEmail">Email</label>
              <input 
              type="email"
              class="form-control c-green"
              id="resEmail"
              placeholder="xyz@gmail.com"
              name="email"
              style="background-color: rgba(70, 205, 123, 0.15)"
               />
            </div>
            <div class="form-group col-9 offset-1">
              <label for="resPhone">Phone</label>
              <input 
              type="tel"
              class="form-control c-green"
              id="resPhone"
              
              placeholder="9947472"
              name="phn"
              style="background-color: rgba(70, 205, 123, 0.15)"
               />
            </div>
          </div>
          <div class="form-group col-9 offset-1">
            <label for="resAddress">Address</label>
            <input
              type="text"
              class="form-control c-green"
              id="resAddress"
              placeholder="1234 Main St"
              style="background-color: rgba(70, 205, 123, 0.15)"
            />
          </div>
          <div class="form-group col-9 offset-1">
            <label for="resAddress2">Address 2</label>
            <input
              type="text"
              class="form-control c-green"
              id="resAddress2"
              placeholder="Apartment, studio, or floor"
              style="background-color: rgba(70, 205, 123, 0.15)"
            />
          </div>
          <div class="form-group col-9 offset-1">
            <label for="resCity">City</label>
            <input
              type="text"
              class="form-control c-green"
              id="resCity"
              style="background-color: rgba(70, 205, 123, 0.15)"
            />
          </div>
          <div class="form-group col-9 offset-1">
            <label for="resState">State</label>
            <select
              id="resState"
              class="form-control"
              style="background-color: rgba(70, 205, 123, 0.15)"
            >
              <option selected>Choose...</option>
              <option>...</option>
            </select>
          </div>
          <div class="form-group col-9 offset-1">
            <label for="resPincode">PinCode</label>
            <input
              type="text"
              class="form-control"
              id="resPincode"
              style="background-color: rgba(70, 205, 123, 0.15)"
            />
          </div>
          <div class="container col-md-6" id="ImageInputForm">
            <div class="mb-2">
              <label for="resLogofiles" class="btn">Select logo</label>
              <input
                class="form-control"
                type="file"
                id="resLogofiles"
                onchange="preview()"
              />
              <button onclick="clearImage()" class="btn btn-primary mt-3">
                Reset
              </button>
            </div>
            <img id="frame" src="" style="height: 240px;" class="img-fluid" />
          </div>
          <div class="form-row ">
            <div class="form-group col-9 offset-1">
              <label for="resGST">GST No</label>
              <input
                type="text"
                class="form-control c-green"
                id="resGST"
                style="background-color: rgba(70, 205, 123, 0.15)"
              />
            </div>
            <div class="form-group col-9 offset-1">
              <label for="resfssai">FSSAI </label>
              <input
                type="text"
                class="form-control c-green"
                id="resfssai"
                style="background-color: rgba(70, 205, 123, 0.15)"
              />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group col-9 offset-1">
              <label for="resOwnername">Owner Name</label>
              <input
                type="text"
                class="form-control c-green"
                id="resOwnername"
                style="background-color: rgba(70, 205, 123, 0.15)"
              />
            </div>
            <div class="form-group col-9 offset-1">
              <label for="resOwnercontact">Owner Contact Details </label>
              <input
                type="text"
                class="form-control c-green"
                id="resOwnercontact"
                style="background-color: rgba(70, 205, 123, 0.15)"
              />
            </div>
          </div>
          <div class="form-group">
            <div class="form-check offset-1">
              <input class="form-check-input" type="checkbox" id="gridCheck" />
              <label class="form-check-label" for="gridCheck">
                Check me out
              </label>
            </div>
          </div>
          <div class="buttons" style="text-align: center">
            <button
              onclick="addRestaurant()"
              class="btn btn-primary mb-1 rounded-pill"
              style="
                width: 100px;
                background-color: rgba(70, 205, 123, 0.15);
                color: black;
              "
             
            >
              ADD
            </button>
            <br />
            <button
              type="submit"
              class="btn btn-danger mb-1 rounded-pill"
              style="
                width: 100px;
                background-color: rgba(70, 205, 123, 0.15);
                color: black;
              "
            >
              DELETE
            </button>
            <br />
            <button
              type="submit"
              class="btn btn-secondary mb-2 rounded-pill"
              style="
                width: 100px;
                background-color: rgba(70, 205, 123, 0.15);
                color: black;
              "
            >
              EDIT
            </button>
            <br />
          </div>
        </form>
      </div>
    </div>

    <script>
      function preview() {
        frame.src = URL.createObjectURL(event.target.files[0]);
      }
      function clearImage() {
        document.getElementById("formFile").value = null;
        frame.src = "";
      }
    </script>
    <script>
      //  if(type === "POST" || type == "PUT"){
        

        const form  = document.getElementById('Rest-Details');
        form.addEventListener('submit', (event) => {
        // handle the form data
        event.preventDefault();
        res_name = document.getElementById( "resName" );
        res_email = document.getElementById( "resEmail" );
        res_phn = document.getElementById( "resPhone" );
        res_address = document.getElementById( "resAddress" );
        res_address2 = document.getElementById( "resAddress2" );
        res_city = document.getElementById( "resCity" );
        res_state = document.getElementById( "resState" );
        res_pincode = document.getElementById( "resPincode" );
        res_gst = document.getElementById( "resGST" );
        res_fssai = document.getElementById( "resfssai" );
        res_ownername = document.getElementById( "resOwnername" );
        res_ownercontact = document.getElementById( "resOwnercontact" );
        
        fulladdress= res_address.value + res_address2.value + res_city.value;
        console.log(fulladdress.value);

        var data = {
          // name: res_name.value,
          // name:res_name.value,
          // email: res_name.value,
          // phone_number: res_phn.value,
          // Menu:"veg",
          // // pincode:res_pincode,
          // pincode:"112032",
          // address: fulladdress,
          // subscription:"yes",
          // logo:"none",
          // owner_name: res_ownername.value,
          // owner_contact:res_ownername.value,
          // gst_no:res_gst.value
          name:"res_name.value",
          email: "res_name.value",
          phone_number:"phn",
          Menu:"veg",
          // pincode:res_pincode,
          pincode:"112032",
          address: "fulladdress",
          subscription:"yes",
          logo:"none",
          owner_name: "res_ownername.value",
          owner_contact:"res_ownername.value",
          gst_no:"res_gst.value"
        };
        console.log(data);
        console.log(data.name);

        let res = fetch("http://127.0.0.1:5000/new/restaurant/add",
        {
            method :"POST",
            headers : {
                "Content-type" :"application/json",
                "Access-Control-Allow-Origin": "*",
            },
            // body :JSON.stringify(data),
            body :JSON.stringify(data),
        }).then((res)=>{
            if(res.ok){
                console.log("HTTP req Successful");
                window.alert("succes");
              }
              else{
                console.log("HTTPreq unsuccessful");
                window.alert(" failed");
            }
            return res;
        })
        .then((res)=>res.json())
        .then((data)=>console.log(data))
        .catch((error)=>console.log(error));

        // console.log(response);
    }
);

        
// async function addRestaurant(e) {
//   e.preventDefault();
//   res_name = document.getElementById( "resName" );
//         res_email = document.getElementById( "resEmail" );
//         res_phn = document.getElementById( "resPhone" );
//         res_address = document.getElementById( "resAddress" );
//         res_address2 = document.getElementById( "resAddress2" );
//         res_city = document.getElementById( "resCity" );
//         res_state = document.getElementById( "resState" );
//         res_pincode = document.getElementById( "resPincode" );
//         res_gst = document.getElementById( "resGST" );
//         res_fssai = document.getElementById( "resfssai" );
//         res_ownername = document.getElementById( "resOwnername" );
//         res_ownercontact = document.getElementById( "resOwnercontact" );
        
//         fulladdress= res_address.value + res_address2.value + res_city.value;
//         console.log(fulladdress.value);
//   var data = {
//     name:"res_name.value",
//           email: "res_name.value",
//           phone_number:"phn",
//           Menu:"veg",
//           // pincode:res_pincode,
//           pincode:"112032",
//           address: "fulladdress",
//           subscription:"yes",
//           logo:"none",
//           owner_name: "res_ownername.value",
//           owner_contact:"res_ownername.value",
//           gst_no:"res_gst.value"
//   };

//   // console.log("reached before");
//   let response = await fetch(
//     "http://127.0.0.1:5000/new/restaurant/add",
//     {
//       method: "POST",
//       headers: {
//         "Content-Type": "application/json;charset=utf-8",
//         "Access-Control-Allow-Origin": "*",
//       },
//       body: JSON.stringify(data),
//     }
//   );
//   alert("Thank You for Your Query!!! Our team will get back to you Shortly.");
//   // console.log(data)

//   // console.log("reached");

//   // let result = await response.json();
//   // alert(result.message)
//   // console.log(result)
//   location.reload();
// }

  
    </script>

  </body>
</html>
